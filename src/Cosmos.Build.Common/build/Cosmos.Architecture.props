<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="15.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Import Project="Cosmos.ArchitecturePicker.props" />

  <!-- Architecture-specific tool paths -->
  <PropertyGroup Condition="'$(CosmosArch)' == 'x64'">
    <CosmosAssembler>yasm</CosmosAssembler>
    <CosmosAssemblerFormat>elf64</CosmosAssemblerFormat>
    <CosmosLinkerEmulation>elf_x86_64</CosmosLinkerEmulation>
    <CosmosGccTarget>x86_64-elf</CosmosGccTarget>
  </PropertyGroup>

  <PropertyGroup Condition="'$(CosmosArch)' == 'arm64'">
    <CosmosAssembler>aarch64-elf-as</CosmosAssembler>
    <CosmosAssemblerFormat>elf64</CosmosAssemblerFormat>
    <CosmosLinkerEmulation>aarch64elf</CosmosLinkerEmulation>
    <CosmosGccTarget>aarch64-elf</CosmosGccTarget>
  </PropertyGroup>

  <ItemGroup>
    <CompilerVisibleProperty Include="CosmosArch" />
  </ItemGroup>

  <!-- Architecture-specific native package references -->
  <ItemGroup Condition="'$(CosmosArch)' == 'x64'">
    <PackageReference Include="Cosmos.Kernel.Native.x64" Version="$(CosmosNativePackageVersion)" Condition="'$(CosmosNativePackageVersion)' != ''" />
  </ItemGroup>

  <ItemGroup Condition="'$(CosmosArch)' == 'arm64'">
    <PackageReference Include="Cosmos.Kernel.Native.ARM64" Version="$(CosmosNativePackageVersion)" Condition="'$(CosmosNativePackageVersion)' != ''" />
  </ItemGroup>

  <!-- Architecture-specific HAL package references -->
  <ItemGroup Condition="'$(CosmosArch)' == 'x64'">
    <PackageReference Include="Cosmos.Kernel.HAL.X64" Version="$(CosmosPackageVersion)" Condition="'$(CosmosPackageVersion)' != ''" />
  </ItemGroup>

  <ItemGroup Condition="'$(CosmosArch)' == 'arm64'">
    <PackageReference Include="Cosmos.Kernel.HAL.ARM64" Version="$(CosmosPackageVersion)" Condition="'$(CosmosPackageVersion)' != ''" />
  </ItemGroup>

</Project>
